### Введение

В Angular разработка UI включает в себя создание шаблонов, управление компонентами на протяжении их "жизни" и стилизацию.

---
### 1. Шаблоны Страниц (Templates)

- **Что это:** HTML-разметка, которая определяет структуру и внешний вид компонента. Каждый компонент имеет свой собственный шаблон.
    
- **Как связаны с компонентом:** Шаблон указывается в метаданных декоратора @Component через templateUrl (ссылка на .html файл) или template (сам HTML-код).
    
    
    ```typescript
    @Component({
      selector: 'app-my-component',
      templateUrl: './my-component.component.html', // Ссылка на HTML-файл
      // или template: `<h1>Мой заголовок</h1><p>Текст</p>` // Сам HTML
    })
    export class MyComponent { /* ... */ }
    ```
    
- **Расширения Angular в шаблонах:** Шаблоны Angular – это не просто чистый HTML. Они содержат специальные конструкции:
    
    - **Интерполяция {{ ... }}:** Отображение значений свойств компонента.
        
        ```html
        <p>Имя пользователя: {{ userName }}</p>
        ```
        
    - **Привязка свойств [property]="...":** Установка DOM-свойств элемента на основе значений из компонента.
        
        
        ```html
        <img [src]="imageUrl" alt="Описание">
        <button [disabled]="isFormInvalid">Отправить</button>
        ```
        
    - **Привязка событий (event)="...":** Реакция на события DOM, вызывая методы компонента.
        
        
        ```html
        <button (click)="saveChanges()">Сохранить</button>
        <input (input)="onInput($event)">
        ```
        
    - **Двусторонняя привязка [(ngModel)]="...":** Для форм. Синхронизирует значение поля ввода с свойством компонента в обе стороны. Требует импорта FormsModule в модуль.
        
        ```html
        <input [(ngModel)]="userName">
        ```
        
    - **Структурные директивы (*ngIf, *ngFor, *ngSwitch):** Манипулируют структурой DOM (добавляют/удаляют элементы). Звездочка * – синтаксический сахар.
        
        
        ```html
        <p *ngIf="showElement">Этот текст виден, если showElement true.</p>
        <ul>
          <li *ngFor="let item of itemList">{{ item }}</li>
        </ul>
        ```
        
    - **Атрибутивные директивы ([ngStyle], [ngClass]):** Изменяют внешний вид или поведение существующего элемента.
        
        
        ```html
        <div [ngStyle]="{ 'color': isError ? 'red' : 'black' }">Статус</div>
        <div [ngClass]="{ 'active': isActive, 'error': hasError }">Сообщение</div>
        ```
        
    - **router-outlet:** Специальный компонент-директива, куда Angular вставляет компоненты, соответствующие текущему маршруту.
        

---

### 2. Жизненный Цикл Компонентов (Component Lifecycle)

Каждый компонент Angular проходит через ряд этапов с момента своего создания до полного удаления из DOM. Angular предоставляет специальные **хуки жизненного цикла** – методы, которые можно реализовать в классе компонента, чтобы выполнить код в определенный момент.

- **Основные хуки:**
    
    1. **ngOnChanges(changes: SimpleChanges):**
        
        - Вызывается **перед** ngOnInit и **перед каждым** изменением входных свойств (@Input) компонента.
            
        - Позволяет отреагировать на изменение входных данных.
            
        - changes – объект, содержащий информацию об изменившихся свойствах.
            
    2. **ngOnInit():**
        
        - Вызывается **один раз** после инициализации компонента и его входных свойств (@Input).
            
        - Идеальное место для выполнения первичной инициализации: загрузка данных, подписка на события.
            
    3. **ngDoCheck():**
        
        - Вызывается **при каждом** обнаружении изменений, как при использовании ngOnChanges, так и при любом другом изменении, которое Angular не может отследить автоматически.
            
        - Используется для более сложной или пользовательской логики обнаружения изменений. Используется редко.
            
    4. **ngAfterContentInit():**
        
        - Вызывается **один раз** после того, как Angular завершил инициализацию **внешнего контента** <ng-conten\>), который был внедрен в компонент.
            
        - Полезно, когда нужно работать с элементами, внедренными через Content Projection.
            
    5. **ngAfterContentChecked():**
        
        - Вызывается **после каждого** ngDoCheck и **после каждого** ngAfterContentInit.
            
        - Позволяет проверить внешний контент после его проверки.
            
    6. **ngAfterViewInit():**
        
        - Вызывается **один раз** после того, как Angular инициализировал **представление (View)** компонента и его дочерние представления.
            
        - Идеальное место для работы с DOM-элементами, созданными в шаблоне компонента (например, для инициализации сторонних библиотек, которые работают с DOM).
            
    7. **ngAfterViewChecked():**
        
        - Вызывается **после каждого** ngDoCheck и **после каждого** ngAfterViewInit.
            
        - Позволяет проверить представление после его проверки.
            
    8. **ngOnDestroy():**
        
        - Вызывается **непосредственно перед тем**, как Angular уничтожит компонент или директиву.
            
        - Используется для выполнения "очистки": отписки от подписок (Observable), освобождения ресурсов, отмены таймеров. **Очень важно для предотвращения утечек памяти.**
            
- **Порядок вызова (для компонента, который монтируется):**
    
    1. ngOnChanges (если есть @Input)
        
    2. ngOnInit
        
    3. ngDoCheck (если реализован)
        
    4. ngAfterContentInit (если есть \<ng-content\>)
        
    5. ngAfterContentChecked (если реализован, после ngAfterContentInit)
        
    6. ngAfterViewInit
        
    7. ngAfterViewChecked (после ngAfterViewInit)
        
    
    - При последующих изменениях: ngOnChanges -> ngDoCheck -> ngAfterContentChecked -> ngAfterViewChecked.
        
    - Перед удалением: ngOnDestroy.
        

---

### 3. Подключение CSS (Стилизация Компонентов)

Angular обеспечивает **изоляцию стилей** для каждого компонента. Это означает, что CSS, написанный для одного компонента, не будет влиять на другие компоненты, если вы не укажете это явно.

- **Способы подключения стилей:**
    
    1. **Изолированные стили (Emulated Scoping - по умолчанию):**
        
        - Angular добавляет уникальный атрибут (например, _ngcontent-c1) к HTML-элементам компонента и к CSS-селекторам. Это гарантирует, что стили применяются только к элементам этого компонента.
            
        - **Как использовать:**
            
            - Указать styleUrls: ['./my-component.component.css'] в декораторе @Component.
                
            - Написать CSS в этом файле, используя обычные селекторы (классы, теги, ID).
                
            
            ```typescript
            @Component({
              selector: 'app-my-component',
              templateUrl: './my-component.component.html',
              styleUrls: ['./my-component.component.css'] // Указываем путь к CSS-файлу
            })
            export class MyComponent { /* ... */ }
            ```
            
            
            ```css
            /* my-component.component.css */
            .my-class {
              color: blue;
            }
            button { /* Этот стиль применится только к <button> внутри этого компонента */
              background-color: lightblue;
            }
            ```
            
    2. **Встроенные стили (Inline Styles):**
        
        - Можно указать стили непосредственно в декораторе @Component.
            
        - **Как использовать:**
            
            - styles: ['h1 { color: red; }', 'p { font-weight: bold; }']
                
            
            codeTypeScript
            
            ```typescript
            @Component({
              selector: 'app-my-component',
              templateUrl: './my-component.component.html',
              styles: [`
                h1 { color: red; }
                p { font-weight: bold; }
              `]
            })
            export class MyComponent { /* ... */ }
            ```
            
        - **Преимущество:** Удобно для небольших стилей.
            
        - **Недостаток:** Менее читаемо для большого количества стилей.
            
    3. **Глобальные стили:**
        
        - CSS-файлы, которые применяются ко всему приложению.
            
        - **Как использовать:** Импортируйте их в корневой файл стилей (src/styles.css или src/styles.scss), который указан в angular.json (или angular-cli.json).
            
        - **Сценарии:** Для сброса стилей (reset/normalize.css), стилизации глобальных элементов (body, html) или импорта CSS-фреймворков (Bootstrap, Tailwind CSS).
            
        - **Внимание:** Глобальные стили не имеют изоляции и могут повлиять на любой элемент в приложении.
            
    4. **Инкапсуляция стилей (View Encapsulation):**
        
        - @Component({ encapsulation: ViewEncapsulation.Emulated }) (по умолчанию).
            
        - @Component({ encapsulation: ViewEncapsulation.ShadowDom }). Использование Shadow DOM браузера для полной изоляции.
            
        - @Component({ encapsulation: ViewEncapsulation.None }). Полное отсутствие изоляции – стили становятся глобальными.
            

---

### Заключение

Шаблоны определяют, как выглядит ваш UI, жизненный цикл позволяет управлять логикой на разных этапах существования компонента, а изоляция стилей обеспечивает предсказуемый внешний вид. Понимание этих концепций критически важно для эффективной разработки в Angular.